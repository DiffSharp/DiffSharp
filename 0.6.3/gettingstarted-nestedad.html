<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The Nested AD
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Nested AD
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Atılım Güneş Baydin; Barak A. Pearlmutter">
    <meta name="description" content="DiffSharp is an automatic differentiation (AD) library implemented in the F# language by Atılım Güneş Baydin and Barak A. Pearlmutter, mainly for research applications in machine learning, as part of their work at the Brain and Computation Lab, Hamilton Institute, National University of Ireland Maynooth.">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    
    <link type="text/css" rel="stylesheet" href="misc/style.css" />
    <script src="misc/tips.js" type="text/javascript"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-48900508-3', 'auto');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="https://fsharp.org">fsharp.org</a></li>
        </ul>
        <h3 class="muted">DiffSharp</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1>Nested AD</h1>

<p>The main functionality of DiffSharp is found under the <strong>DiffSharp.AD</strong> namespace. Opening this namespace allows you to automatically evaluate derivatives of code via forward and/or reverse AD.</p>

<p>For a complete list of the available differentiation operations, please refer to <a href="api-overview.html">API Overview</a> and <a href="reference/index.html">API Reference</a>.</p>

<h2>Background</h2>

<p>The library supports nested invocations of differentiation operations. So, for example, you can compute higher-order derivatives or take derivatives of functions that are themselves internally computing derivatives.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">DiffSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">AD</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="f">y</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="f">sin</span> (<span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="f">sqrt</span> <span onmouseout="hideTip(event, 'fs4', 7)" onmouseover="showTip(event, 'fs4', 7)" class="i">x</span>)

<span class="c">// Derivative of y</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="f">d1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="f">diff</span> <span onmouseout="hideTip(event, 'fs3', 10)" onmouseover="showTip(event, 'fs3', 10)" class="f">y</span>

<span class="c">// 2nd derivative of y</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="f">d2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 12)" onmouseover="showTip(event, 'fs8', 12)" class="f">diff</span> (<span onmouseout="hideTip(event, 'fs8', 13)" onmouseover="showTip(event, 'fs8', 13)" class="f">diff</span> <span onmouseout="hideTip(event, 'fs3', 14)" onmouseover="showTip(event, 'fs3', 14)" class="f">y</span>)

<span class="c">// 3rd derivative of y</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 15)" onmouseover="showTip(event, 'fs10', 15)" class="f">d3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 16)" onmouseover="showTip(event, 'fs8', 16)" class="f">diff</span> <span onmouseout="hideTip(event, 'fs9', 17)" onmouseover="showTip(event, 'fs9', 17)" class="f">d2</span>
</pre>
</td>
</tr>
</table>

<p>Moreover, DiffSharp can handle cases such as computing the derivative of a function <span class="math">\(f\)</span> that takes an argument <span class="math">\(x\)</span>, which, in turn, computes the derivative of another function <span class="math">\(g\)</span> nested inside <span class="math">\(f\)</span> that has a free reference to <span class="math">\(x\)</span>, the argument to the surrounding function.</p>

<p><span class="math">\[  \frac{d}{dx} \left. \left( x \left( \left. \frac{d}{dy} x y \; \right|_{y=3} \right) \right) \right|_{x=2}\]</span></p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 18)" onmouseover="showTip(event, 'fs11', 18)" class="i">d4</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 19)" onmouseover="showTip(event, 'fs8', 19)" class="f">diff</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs4', 20)" onmouseover="showTip(event, 'fs4', 20)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs4', 21)" onmouseover="showTip(event, 'fs4', 21)" class="i">x</span> <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs8', 22)" onmouseover="showTip(event, 'fs8', 22)" class="f">diff</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs12', 23)" onmouseover="showTip(event, 'fs12', 23)" class="i">y</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs4', 24)" onmouseover="showTip(event, 'fs4', 24)" class="i">x</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs12', 25)" onmouseover="showTip(event, 'fs12', 25)" class="i">y</span>) (<span onmouseout="hideTip(event, 'fs13', 26)" onmouseover="showTip(event, 'fs13', 26)" class="p">D</span> <span class="n">3.</span>))) (<span onmouseout="hideTip(event, 'fs13', 27)" onmouseover="showTip(event, 'fs13', 27)" class="p">D</span> <span class="n">2.</span>)
</pre>
</td>
</tr>
</table>

<table class="pre"><tr><td><pre><code>val d4 : D = D 4.0</code></pre></td></tr></table>

<p>This allows you to write, for example, nested optimization algorithms of the form</p>

<p><span class="math">\[  \mathbf{min} \left( \lambda x \; . \; (f \; x) + \mathbf{min} \left( \lambda y \; . \; g \; x \; y \right) \right)\; ,\]</span></p>

<p>for functions <span class="math">\(f\)</span> and <span class="math">\(g\)</span> and a gradient-based minimization procedure <span class="math">\(\mathbf{min}\)</span>.</p>

<p>Correctly nesting AD in a functional framework is achieved through the method of "tagging", which serves to prevent a class of bugs called "perturbation confusion" where a system fails to distinguish between distinct perturbations introduced by distinct invocations of differentiation operations. You can refer to the following articles, among others, to understand the bug and its solution:</p>

<p><em>Jeffrey Mark Siskind and Barak A. Pearlmutter. Perturbation Confusion and Referential Transparency: Correct Functional Implementation of Forward-Mode AD. In Proceedings of the 17th International Workshop on Implementation and Application of Functional Languages (IFL2005), Dublin, Ireland, Sep. 19-21, 2005.</em></p>

<p><em>Jeffrey Mark Siskind and Barak A. Pearlmutter. Nesting forward-mode AD in a functional framework. Higher Order and Symbolic Computation 21(4):361-76, 2008. <a href="https://dx.doi.org/10.1007/s10990-008-9037-1">doi:10.1007/s10990-008-9037-1</a> </em></p>

<p><em>Barak A. Pearlmutter and Jeffrey Mark Siskind. Reverse-Mode AD in a functional framework: Lambda the ultimate backpropagator. TOPLAS 30(2):1-36, Mar. 2008. <a href="https://dx.doi.org/10.1145/1330017.1330018">doi:10.1145/1330017.1330018</a> </em></p>

<h2>Forward and Reverse AD Operations</h2>

<p>DiffSharp automatically selects forward or reverse AD, or any combination of these, for a given operation. (If you need, you can force only forward or only reverse AD by using <strong>DiffSharp.AD.Forward</strong> or <strong>DiffSharp.AD.Reverse</strong>.)</p>

<p>The following are just a small selection of operations.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 29)" onmouseover="showTip(event, 'fs1', 29)" class="i">DiffSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 30)" onmouseover="showTip(event, 'fs2', 30)" class="i">AD</span>

<span class="c">// f: D -&gt; D</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 31)" onmouseover="showTip(event, 'fs15', 31)" class="f">f</span> (<span onmouseout="hideTip(event, 'fs4', 32)" onmouseover="showTip(event, 'fs4', 32)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs16', 33)" onmouseover="showTip(event, 'fs16', 33)" class="t">D</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 34)" onmouseover="showTip(event, 'fs5', 34)" class="f">sin</span> (<span class="n">3.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs6', 35)" onmouseover="showTip(event, 'fs6', 35)" class="f">sqrt</span> <span onmouseout="hideTip(event, 'fs4', 36)" onmouseover="showTip(event, 'fs4', 36)" class="i">x</span>)

<span class="c">// Derivative of f at 2</span>
<span class="c">// Uses forward AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 37)" onmouseover="showTip(event, 'fs17', 37)" class="i">df</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 38)" onmouseover="showTip(event, 'fs8', 38)" class="f">diff</span> <span onmouseout="hideTip(event, 'fs15', 39)" onmouseover="showTip(event, 'fs15', 39)" class="f">f</span> (<span onmouseout="hideTip(event, 'fs13', 40)" onmouseover="showTip(event, 'fs13', 40)" class="p">D</span> <span class="n">2.</span>)

<span class="c">// g: D[] -&gt; D</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 41)" onmouseover="showTip(event, 'fs18', 41)" class="f">g</span> (<span onmouseout="hideTip(event, 'fs19', 42)" onmouseover="showTip(event, 'fs19', 42)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs16', 43)" onmouseover="showTip(event, 'fs16', 43)" class="t">D</span>[]) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 44)" onmouseover="showTip(event, 'fs5', 44)" class="f">sin</span> (<span onmouseout="hideTip(event, 'fs19', 45)" onmouseover="showTip(event, 'fs19', 45)" class="i">x</span><span class="o">.</span>[<span class="n">0</span>] <span class="o">*</span> <span onmouseout="hideTip(event, 'fs19', 46)" onmouseover="showTip(event, 'fs19', 46)" class="i">x</span><span class="o">.</span>[<span class="n">1</span>])

<span class="c">// Directional derivative of g at (2, 3) with direction (4, 1)</span>
<span class="c">// Uses forward AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 47)" onmouseover="showTip(event, 'fs20', 47)" class="i">ddg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 48)" onmouseover="showTip(event, 'fs21', 48)" class="f">gradv</span> <span onmouseout="hideTip(event, 'fs18', 49)" onmouseover="showTip(event, 'fs18', 49)" class="f">g</span> [|<span onmouseout="hideTip(event, 'fs13', 50)" onmouseover="showTip(event, 'fs13', 50)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 51)" onmouseover="showTip(event, 'fs13', 51)" class="p">D</span> <span class="n">3.</span>|] [|<span onmouseout="hideTip(event, 'fs13', 52)" onmouseover="showTip(event, 'fs13', 52)" class="p">D</span> <span class="n">4.</span>; <span onmouseout="hideTip(event, 'fs13', 53)" onmouseover="showTip(event, 'fs13', 53)" class="p">D</span> <span class="n">1.</span>|]

<span class="c">// Gradient of g at (2, 3)</span>
<span class="c">// Uses reverse AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 54)" onmouseover="showTip(event, 'fs22', 54)" class="i">gg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 55)" onmouseover="showTip(event, 'fs23', 55)" class="f">grad</span> <span onmouseout="hideTip(event, 'fs18', 56)" onmouseover="showTip(event, 'fs18', 56)" class="f">g</span> [|<span onmouseout="hideTip(event, 'fs13', 57)" onmouseover="showTip(event, 'fs13', 57)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 58)" onmouseover="showTip(event, 'fs13', 58)" class="p">D</span> <span class="n">3.</span>|]

<span class="c">// Hessian-vector product of g at (2, 3) with vector (4, 1)</span>
<span class="c">// Uses reverse-on-forward AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 59)" onmouseover="showTip(event, 'fs24', 59)" class="i">hvg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs25', 60)" onmouseover="showTip(event, 'fs25', 60)" class="f">hessianv</span> <span onmouseout="hideTip(event, 'fs18', 61)" onmouseover="showTip(event, 'fs18', 61)" class="f">g</span> [|<span onmouseout="hideTip(event, 'fs13', 62)" onmouseover="showTip(event, 'fs13', 62)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 63)" onmouseover="showTip(event, 'fs13', 63)" class="p">D</span> <span class="n">3.</span>|] [|<span onmouseout="hideTip(event, 'fs13', 64)" onmouseover="showTip(event, 'fs13', 64)" class="p">D</span> <span class="n">4.</span>; <span onmouseout="hideTip(event, 'fs13', 65)" onmouseover="showTip(event, 'fs13', 65)" class="p">D</span> <span class="n">1.</span>|]

<span class="c">// Hessian of g at (2, 3)</span>
<span class="c">// Uses reverse-on-forward AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 66)" onmouseover="showTip(event, 'fs26', 66)" class="i">hg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs27', 67)" onmouseover="showTip(event, 'fs27', 67)" class="f">hessian</span> <span onmouseout="hideTip(event, 'fs18', 68)" onmouseover="showTip(event, 'fs18', 68)" class="f">g</span> [|<span onmouseout="hideTip(event, 'fs13', 69)" onmouseover="showTip(event, 'fs13', 69)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 70)" onmouseover="showTip(event, 'fs13', 70)" class="p">D</span> <span class="n">3.</span>|]

<span class="c">// h: D[] -&gt; D[]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 71)" onmouseover="showTip(event, 'fs28', 71)" class="f">h</span> (<span onmouseout="hideTip(event, 'fs19', 72)" onmouseover="showTip(event, 'fs19', 72)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs16', 73)" onmouseover="showTip(event, 'fs16', 73)" class="t">D</span>[]) <span class="o">=</span> [| <span onmouseout="hideTip(event, 'fs5', 74)" onmouseover="showTip(event, 'fs5', 74)" class="f">sin</span> <span onmouseout="hideTip(event, 'fs19', 75)" onmouseover="showTip(event, 'fs19', 75)" class="i">x</span><span class="o">.</span>[<span class="n">0</span>]; <span onmouseout="hideTip(event, 'fs29', 76)" onmouseover="showTip(event, 'fs29', 76)" class="f">cos</span> <span onmouseout="hideTip(event, 'fs19', 77)" onmouseover="showTip(event, 'fs19', 77)" class="i">x</span><span class="o">.</span>[<span class="n">1</span>] |]

<span class="c">// Jacobian-vector product of h at (2, 3) with vector (4, 1)</span>
<span class="c">// Uses forward AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 78)" onmouseover="showTip(event, 'fs30', 78)" class="i">jvh</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 79)" onmouseover="showTip(event, 'fs31', 79)" class="f">jacobianv</span> <span onmouseout="hideTip(event, 'fs28', 80)" onmouseover="showTip(event, 'fs28', 80)" class="f">h</span> [|<span onmouseout="hideTip(event, 'fs13', 81)" onmouseover="showTip(event, 'fs13', 81)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 82)" onmouseover="showTip(event, 'fs13', 82)" class="p">D</span> <span class="n">3.</span>|] [|<span onmouseout="hideTip(event, 'fs13', 83)" onmouseover="showTip(event, 'fs13', 83)" class="p">D</span> <span class="n">4.</span>; <span onmouseout="hideTip(event, 'fs13', 84)" onmouseover="showTip(event, 'fs13', 84)" class="p">D</span> <span class="n">1.</span>|]

<span class="c">// Transposed Jacobian-vector product of h at (2, 3) with vector (4, 1)</span>
<span class="c">// Uses reverse AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 85)" onmouseover="showTip(event, 'fs32', 85)" class="i">tjvh</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 86)" onmouseover="showTip(event, 'fs33', 86)" class="f">jacobianTv</span> <span onmouseout="hideTip(event, 'fs28', 87)" onmouseover="showTip(event, 'fs28', 87)" class="f">h</span> [|<span onmouseout="hideTip(event, 'fs13', 88)" onmouseover="showTip(event, 'fs13', 88)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 89)" onmouseover="showTip(event, 'fs13', 89)" class="p">D</span> <span class="n">3.</span>|] [|<span onmouseout="hideTip(event, 'fs13', 90)" onmouseover="showTip(event, 'fs13', 90)" class="p">D</span> <span class="n">4.</span>; <span onmouseout="hideTip(event, 'fs13', 91)" onmouseover="showTip(event, 'fs13', 91)" class="p">D</span> <span class="n">1.</span>|]

<span class="c">// Jacobian of h at (2, 3)</span>
<span class="c">// Uses forward or reverse AD depending on the number of inputs and outputs</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 92)" onmouseover="showTip(event, 'fs34', 92)" class="i">jh</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 93)" onmouseover="showTip(event, 'fs35', 93)" class="f">jacobian</span> <span onmouseout="hideTip(event, 'fs28', 94)" onmouseover="showTip(event, 'fs28', 94)" class="f">h</span> [|<span onmouseout="hideTip(event, 'fs13', 95)" onmouseover="showTip(event, 'fs13', 95)" class="p">D</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs13', 96)" onmouseover="showTip(event, 'fs13', 96)" class="p">D</span> <span class="n">3.</span>|]
</pre>
</td>
</tr>
</table>

<h2>Using the Reverse AD Trace</h2>

<p>In addition to the differentiation API that uses reverse AD (such as <strong>grad</strong>, <strong>jacobianTv</strong> ), you can make use of the exposed <a href="https://en.wikipedia.org/wiki/Tracing_%28software%29">trace</a> functionality. Reverse AD automatically builds a global trace (or "tape", in AD literature) of all executed numeric operations, which subsequently allows a reverse sweep of these operations for propagating adjoint values in reverse.</p>

<p>The technique is equivalent to the <a href="https://en.wikipedia.org/wiki/Backpropagation">backpropagation</a> method commonly used for training artificial neural networks, which is essentially just a special case of reverse AD. You can see an implementation of the backpropagation algorithm using reverse AD in the <a href="examples-neuralnetworks.html">neural networks</a> example.</p>

<p>For example, consider the computation</p>

<p><span class="math">\[  e = (\sin a) (a + b) \; ,\]</span></p>

<p>using the values <span class="math">\(a = 0.5\)</span> and <span class="math">\(b = 1.2\)</span>.</p>

<p>During the execution of a program, this computation is carried out by the sequence of operations</p>

<p><span class="math">\[ \begin{eqnarray*}
 a &amp;=&amp; 0.5 \; ,\\
 b &amp;=&amp; 1.2 \; , \\
 c &amp;=&amp; \sin a \; , \\
 d &amp;=&amp; a + b \; , \\
 e &amp;=&amp; c \times d \; ,
 \end{eqnarray*}\]</span></p>

<p>the dependencies between which can be represented by the computational graph below.</p>

<div class="row">
    <div class="span6 offset2">
        <img src="img/gettingstarted-reversead-graph.png" alt="Chart" style="width:350px;"/>
    </div>
</div>

<p>Reverse mode AD works by propagating adjoint values from the output (e.g. <span class="math">\(\bar{e} = \frac{\partial e}{\partial e}\)</span>) towards the inputs (e.g. <span class="math">\(\bar{a} = \frac{\partial e}{\partial a}\)</span> and <span class="math">\(\bar{b} = \frac{\partial e}{\partial b}\)</span>), using adjoint propagation rules dictated by the dependencies in the computational graph:</p>

<p><span class="math">\[ \begin{eqnarray*}
 \bar{d} &amp;=&amp; \frac{\partial e}{\partial d} &amp;=&amp; \frac{\partial e}{\partial e} \frac{\partial e}{\partial d} &amp;=&amp; \bar{e} c\; , \\
 \bar{c} &amp;=&amp; \frac{\partial e}{\partial c} &amp;=&amp; \frac{\partial e}{\partial e} \frac{\partial e}{\partial c} &amp;=&amp; \bar{e} d\; , \\
 \bar{b} &amp;=&amp; \frac{\partial e}{\partial b} &amp;=&amp; \frac{\partial e}{\partial d} \frac{\partial d}{\partial b} &amp;=&amp; \bar{d} \; , \\
 \bar{a} &amp;=&amp; \frac{\partial e}{\partial a} &amp;=&amp; \frac{\partial e}{\partial c} \frac{\partial c}{\partial a} + \frac{\partial e}{\partial d} \frac{\partial d}{\partial a} &amp;=&amp; \bar{c} (\cos a) + \bar{d} \; .\\
 \end{eqnarray*}\]</span></p>

<p>In order to write code using low-level AD functionality, you should understand the tagging method used for avoiding perturbation confusion. Users would need to write such code sporadically. The normal way of interacting with the library is through the high-level differentiation API, which handles these issues internally.</p>

<p>You can get access to adjoints as follows.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 97)" onmouseover="showTip(event, 'fs1', 97)" class="i">DiffSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 98)" onmouseover="showTip(event, 'fs2', 98)" class="i">AD</span>

<span class="c">// Get a fresh global tag for this run of reverse AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 99)" onmouseover="showTip(event, 'fs36', 99)" class="i">i</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 100)" onmouseover="showTip(event, 'fs1', 100)" class="i">DiffSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs37', 101)" onmouseover="showTip(event, 'fs37', 101)" class="t">Util</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 102)" onmouseover="showTip(event, 'fs38', 102)" class="t">GlobalTagger</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs39', 103)" onmouseover="showTip(event, 'fs39', 103)" class="i">Next</span>

<span class="c">// Initialize input values for reverse AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 104)" onmouseover="showTip(event, 'fs40', 104)" class="i">a</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 105)" onmouseover="showTip(event, 'fs13', 105)" class="p">D</span> <span class="n">0.5</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 106)" onmouseover="showTip(event, 'fs41', 106)" class="f">makeDR</span> <span onmouseout="hideTip(event, 'fs36', 107)" onmouseover="showTip(event, 'fs36', 107)" class="i">i</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 108)" onmouseover="showTip(event, 'fs42', 108)" class="i">b</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 109)" onmouseover="showTip(event, 'fs13', 109)" class="p">D</span> <span class="n">1.2</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 110)" onmouseover="showTip(event, 'fs41', 110)" class="f">makeDR</span> <span onmouseout="hideTip(event, 'fs36', 111)" onmouseover="showTip(event, 'fs36', 111)" class="i">i</span>

<span class="c">// Perform a series of operations involving the D type</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 112)" onmouseover="showTip(event, 'fs43', 112)" class="i">e</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs5', 113)" onmouseover="showTip(event, 'fs5', 113)" class="f">sin</span> <span onmouseout="hideTip(event, 'fs40', 114)" onmouseover="showTip(event, 'fs40', 114)" class="i">a</span>) <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs40', 115)" onmouseover="showTip(event, 'fs40', 115)" class="i">a</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs42', 116)" onmouseover="showTip(event, 'fs42', 116)" class="i">b</span>)

<span class="c">// Propagate the adjoint value of 1 backward from e (or de/de = 1)</span>
<span class="c">// i.e., calculate partial derivatives of e with respect to other variables</span>
<span onmouseout="hideTip(event, 'fs43', 117)" onmouseover="showTip(event, 'fs43', 117)" class="i">e</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 118)" onmouseover="showTip(event, 'fs44', 118)" class="f">reverseProp</span> (<span onmouseout="hideTip(event, 'fs13', 119)" onmouseover="showTip(event, 'fs13', 119)" class="p">D</span> <span class="n">1.</span>)

<span class="c">// Read the adjoint values of the inputs</span>
<span class="c">// You can calculate all partial derivatives in just one reverse sweep!</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 120)" onmouseover="showTip(event, 'fs45', 120)" class="i">deda</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs40', 121)" onmouseover="showTip(event, 'fs40', 121)" class="i">a</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 122)" onmouseover="showTip(event, 'fs46', 122)" class="i">A</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 123)" onmouseover="showTip(event, 'fs47', 123)" class="i">dedb</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs42', 124)" onmouseover="showTip(event, 'fs42', 124)" class="i">b</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 125)" onmouseover="showTip(event, 'fs46', 125)" class="i">A</span>
</pre>
</td>
</tr>
</table>

<table class="pre"><tr><td><pre><code>val a : D =
  DR (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},550202u)
val b : D =
  DR (D 1.2,{contents = D 0.4794255386;},Noop,{contents = 0u;},550202u)
val e : D =
  DR
    (D 0.8150234156,{contents = D 1.0;},
     Mul
       (DR
          (D 0.4794255386,{contents = D 1.7;},
           Sin
             (DR
                (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},
                 550202u)),{contents = 0u;},550202u),
        DR
          (D 1.7,{contents = D 0.4794255386;},
           Add
             (DR
                (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},
                 550202u),
              DR
                (D 1.2,{contents = D 0.4794255386;},Noop,{contents = 0u;},
                 550202u)),{contents = 0u;},550202u)),{contents = 0u;},550202u)
val deda : D = D 1.971315894
val dedb : D = D 0.4794255386</code></pre></td></tr></table>

<p>In addition to the partial derivatives of the dependent variable <span class="math">\(e\)</span> with respect to the independent variables <span class="math">\(a\)</span> and <span class="math">\(b\)</span>, you can also extract the partial derivatives of <span class="math">\(e\)</span> with respect to any intermediate variable involved in this computation.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// Get a fresh global tag for this run of reverse AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 127)" onmouseover="showTip(event, 'fs48', 127)" class="i">i&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 128)" onmouseover="showTip(event, 'fs1', 128)" class="i">DiffSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs37', 129)" onmouseover="showTip(event, 'fs37', 129)" class="t">Util</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 130)" onmouseover="showTip(event, 'fs38', 130)" class="t">GlobalTagger</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs39', 131)" onmouseover="showTip(event, 'fs39', 131)" class="i">Next</span>

<span class="c">// Initialize input values for reverse AD</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 132)" onmouseover="showTip(event, 'fs49', 132)" class="i">a&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 133)" onmouseover="showTip(event, 'fs13', 133)" class="p">D</span> <span class="n">0.5</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 134)" onmouseover="showTip(event, 'fs41', 134)" class="f">makeDR</span> <span onmouseout="hideTip(event, 'fs48', 135)" onmouseover="showTip(event, 'fs48', 135)" class="i">i&#39;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs50', 136)" onmouseover="showTip(event, 'fs50', 136)" class="i">b&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 137)" onmouseover="showTip(event, 'fs13', 137)" class="p">D</span> <span class="n">1.2</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 138)" onmouseover="showTip(event, 'fs41', 138)" class="f">makeDR</span> <span onmouseout="hideTip(event, 'fs48', 139)" onmouseover="showTip(event, 'fs48', 139)" class="i">i&#39;</span>

<span class="c">// Perform a series of operations involving the D type</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 140)" onmouseover="showTip(event, 'fs51', 140)" class="i">c&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 141)" onmouseover="showTip(event, 'fs5', 141)" class="f">sin</span> <span onmouseout="hideTip(event, 'fs49', 142)" onmouseover="showTip(event, 'fs49', 142)" class="i">a&#39;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 143)" onmouseover="showTip(event, 'fs52', 143)" class="i">d&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs49', 144)" onmouseover="showTip(event, 'fs49', 144)" class="i">a&#39;</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs50', 145)" onmouseover="showTip(event, 'fs50', 145)" class="i">b&#39;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 146)" onmouseover="showTip(event, 'fs53', 146)" class="i">e&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 147)" onmouseover="showTip(event, 'fs51', 147)" class="i">c&#39;</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs52', 148)" onmouseover="showTip(event, 'fs52', 148)" class="i">d&#39;</span> <span class="c">// e&#39; = (sin a&#39;) * (a&#39; + b&#39;)</span>

<span class="c">// Propagate the adjoint value of 1 backward from e</span>
<span onmouseout="hideTip(event, 'fs53', 149)" onmouseover="showTip(event, 'fs53', 149)" class="i">e&#39;</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 150)" onmouseover="showTip(event, 'fs44', 150)" class="f">reverseProp</span> (<span onmouseout="hideTip(event, 'fs13', 151)" onmouseover="showTip(event, 'fs13', 151)" class="p">D</span> <span class="n">1.</span>)

<span class="c">// Read the adjoint values</span>
<span class="c">// You can calculate all partial derivatives in just one reverse sweep!</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 152)" onmouseover="showTip(event, 'fs54', 152)" class="i">de&#39;da&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs49', 153)" onmouseover="showTip(event, 'fs49', 153)" class="i">a&#39;</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 154)" onmouseover="showTip(event, 'fs46', 154)" class="i">A</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 155)" onmouseover="showTip(event, 'fs55', 155)" class="i">de&#39;db&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 156)" onmouseover="showTip(event, 'fs50', 156)" class="i">b&#39;</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 157)" onmouseover="showTip(event, 'fs46', 157)" class="i">A</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 158)" onmouseover="showTip(event, 'fs56', 158)" class="i">de&#39;dc&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 159)" onmouseover="showTip(event, 'fs51', 159)" class="i">c&#39;</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 160)" onmouseover="showTip(event, 'fs46', 160)" class="i">A</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 161)" onmouseover="showTip(event, 'fs57', 161)" class="i">de&#39;dd&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 162)" onmouseover="showTip(event, 'fs52', 162)" class="i">d&#39;</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 163)" onmouseover="showTip(event, 'fs46', 163)" class="i">A</span>
</pre>
</td>
</tr>
</table>

<table class="pre"><tr><td><pre><code>val a' : D =
  DR (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},550203u)
val b' : D =
  DR (D 1.2,{contents = D 0.4794255386;},Noop,{contents = 0u;},550203u)
val c' : D =
  DR
    (D 0.4794255386,{contents = D 1.7;},
     Sin
       (DR (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},550203u)),
     {contents = 0u;},550203u)
val d' : D =
  DR
    (D 1.7,{contents = D 0.4794255386;},
     Add
       (DR (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},550203u),
        DR (D 1.2,{contents = D 0.4794255386;},Noop,{contents = 0u;},550203u)),
     {contents = 0u;},550203u)
val e' : D =
  DR
    (D 0.8150234156,{contents = D 1.0;},
     Mul
       (DR
          (D 0.4794255386,{contents = D 1.7;},
           Sin
             (DR
                (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},
                 550203u)),{contents = 0u;},550203u),
        DR
          (D 1.7,{contents = D 0.4794255386;},
           Add
             (DR
                (D 0.5,{contents = D 1.971315894;},Noop,{contents = 0u;},
                 550203u),
              DR
                (D 1.2,{contents = D 0.4794255386;},Noop,{contents = 0u;},
                 550203u)),{contents = 0u;},550203u)),{contents = 0u;},550203u)
val de'da' : D = D 1.971315894
val de'db' : D = D 0.4794255386
val de'dc' : D = D 1.7
val de'dd' : D = D 0.4794255386</code></pre></td></tr></table>

          <div class="tip" id="fs1">namespace DiffSharp</div>
<div class="tip" id="fs2">namespace DiffSharp.AD</div>
<div class="tip" id="fs3">val y : x:D -&gt; D<br /><br />Full name: Gettingstarted-nestedad.y</div>
<div class="tip" id="fs4">val x : D</div>
<div class="tip" id="fs5">val sin : value:&#39;T -&gt; &#39;T (requires member Sin)<br /><br />Full name: Microsoft.FSharp.Core.Operators.sin</div>
<div class="tip" id="fs6">val sqrt : value:&#39;T -&gt; &#39;U (requires member Sqrt)<br /><br />Full name: Microsoft.FSharp.Core.Operators.sqrt</div>
<div class="tip" id="fs7">val d1 : (D -&gt; D)<br /><br />Full name: Gettingstarted-nestedad.d1</div>
<div class="tip" id="fs8">val diff : f:(D -&gt; D) -&gt; x:D -&gt; D<br /><br />Full name: DiffSharp.AD.DiffOps.diff</div>
<div class="tip" id="fs9">val d2 : (D -&gt; D)<br /><br />Full name: Gettingstarted-nestedad.d2</div>
<div class="tip" id="fs10">val d3 : (D -&gt; D)<br /><br />Full name: Gettingstarted-nestedad.d3</div>
<div class="tip" id="fs11">val d4 : D<br /><br />Full name: Gettingstarted-nestedad.d4</div>
<div class="tip" id="fs12">val y : D</div>
<div class="tip" id="fs13">union case D.D: float -&gt; D</div>
<div class="tip" id="fs14">val printf : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printf</div>
<div class="tip" id="fs15">val f : x:D -&gt; D<br /><br />Full name: Gettingstarted-nestedad.f</div>
<div class="tip" id="fs16">type D =<br />&#160;&#160;| D of float<br />&#160;&#160;| DF of D * D * uint32<br />&#160;&#160;| DR of D * D ref * TraceOp * uint32 ref * uint32<br />&#160;&#160;interface IComparable<br />&#160;&#160;override Equals : other:obj -&gt; bool<br />&#160;&#160;override GetHashCode : unit -&gt; int<br />&#160;&#160;member A : D<br />&#160;&#160;member F : uint32<br />&#160;&#160;member P : D<br />&#160;&#160;member T : D<br />&#160;&#160;member A : D with set<br />&#160;&#160;member F : uint32 with set<br />&#160;&#160;static member Abs : a:D -&gt; D<br />&#160;&#160;static member Acos : a:D -&gt; D<br />&#160;&#160;static member Asin : a:D -&gt; D<br />&#160;&#160;static member Atan : a:D -&gt; D<br />&#160;&#160;static member Atan2 : a:int * b:D -&gt; D<br />&#160;&#160;static member Atan2 : a:D * b:int -&gt; D<br />&#160;&#160;static member Atan2 : a:float * b:D -&gt; D<br />&#160;&#160;static member Atan2 : a:D * b:float -&gt; D<br />&#160;&#160;static member Atan2 : a:D * b:D -&gt; D<br />&#160;&#160;static member Ceiling : a:D -&gt; D<br />&#160;&#160;static member Cos : a:D -&gt; D<br />&#160;&#160;static member Cosh : a:D -&gt; D<br />&#160;&#160;static member DivideByInt : d:D * i:int -&gt; D<br />&#160;&#160;static member Exp : a:D -&gt; D<br />&#160;&#160;static member Floor : a:D -&gt; D<br />&#160;&#160;static member Log : a:D -&gt; D<br />&#160;&#160;static member Log10 : a:D -&gt; D<br />&#160;&#160;static member Pow : a:int * b:D -&gt; D<br />&#160;&#160;static member Pow : a:D * b:int -&gt; D<br />&#160;&#160;static member Pow : a:float * b:D -&gt; D<br />&#160;&#160;static member Pow : a:D * b:float -&gt; D<br />&#160;&#160;static member Pow : a:D * b:D -&gt; D<br />&#160;&#160;static member Round : a:D -&gt; D<br />&#160;&#160;static member Sin : a:D -&gt; D<br />&#160;&#160;static member Sinh : a:D -&gt; D<br />&#160;&#160;static member Sqrt : a:D -&gt; D<br />&#160;&#160;static member Tan : a:D -&gt; D<br />&#160;&#160;static member Tanh : a:D -&gt; D<br />&#160;&#160;static member One : D<br />&#160;&#160;static member Zero : D<br />&#160;&#160;static member ( + ) : a:int * b:D -&gt; D<br />&#160;&#160;static member ( + ) : a:D * b:int -&gt; D<br />&#160;&#160;static member ( + ) : a:float * b:D -&gt; D<br />&#160;&#160;static member ( + ) : a:D * b:float -&gt; D<br />&#160;&#160;static member ( + ) : a:D * b:D -&gt; D<br />&#160;&#160;static member ( / ) : a:int * b:D -&gt; D<br />&#160;&#160;static member ( / ) : a:D * b:int -&gt; D<br />&#160;&#160;static member ( / ) : a:float * b:D -&gt; D<br />&#160;&#160;static member ( / ) : a:D * b:float -&gt; D<br />&#160;&#160;static member ( / ) : a:D * b:D -&gt; D<br />&#160;&#160;static member op_Explicit : d:D -&gt; int<br />&#160;&#160;static member op_Explicit : d:D -&gt; float<br />&#160;&#160;static member ( * ) : a:int * b:D -&gt; D<br />&#160;&#160;static member ( * ) : a:D * b:int -&gt; D<br />&#160;&#160;static member ( * ) : a:float * b:D -&gt; D<br />&#160;&#160;static member ( * ) : a:D * b:float -&gt; D<br />&#160;&#160;static member ( * ) : a:D * b:D -&gt; D<br />&#160;&#160;static member ( - ) : a:int * b:D -&gt; D<br />&#160;&#160;static member ( - ) : a:D * b:int -&gt; D<br />&#160;&#160;static member ( - ) : a:float * b:D -&gt; D<br />&#160;&#160;static member ( - ) : a:D * b:float -&gt; D<br />&#160;&#160;static member ( - ) : a:D * b:D -&gt; D<br />&#160;&#160;static member ( ~- ) : a:D -&gt; D<br /><br />Full name: DiffSharp.AD.D</div>
<div class="tip" id="fs17">val df : D<br /><br />Full name: Gettingstarted-nestedad.df</div>
<div class="tip" id="fs18">val g : x:D [] -&gt; D<br /><br />Full name: Gettingstarted-nestedad.g</div>
<div class="tip" id="fs19">val x : D []</div>
<div class="tip" id="fs20">val ddg : D<br /><br />Full name: Gettingstarted-nestedad.ddg</div>
<div class="tip" id="fs21">val gradv : f:(D [] -&gt; D) -&gt; x:D [] -&gt; v:D [] -&gt; D<br /><br />Full name: DiffSharp.AD.DiffOps.gradv</div>
<div class="tip" id="fs22">val gg : D []<br /><br />Full name: Gettingstarted-nestedad.gg</div>
<div class="tip" id="fs23">val grad : f:(D [] -&gt; D) -&gt; x:D [] -&gt; D []<br /><br />Full name: DiffSharp.AD.DiffOps.grad</div>
<div class="tip" id="fs24">val hvg : D []<br /><br />Full name: Gettingstarted-nestedad.hvg</div>
<div class="tip" id="fs25">val hessianv : f:(D [] -&gt; D) -&gt; x:D [] -&gt; v:D [] -&gt; D []<br /><br />Full name: DiffSharp.AD.DiffOps.hessianv</div>
<div class="tip" id="fs26">val hg : D [,]<br /><br />Full name: Gettingstarted-nestedad.hg</div>
<div class="tip" id="fs27">val hessian : f:(D [] -&gt; D) -&gt; x:D [] -&gt; D [,]<br /><br />Full name: DiffSharp.AD.DiffOps.hessian</div>
<div class="tip" id="fs28">val h : x:D [] -&gt; D []<br /><br />Full name: Gettingstarted-nestedad.h</div>
<div class="tip" id="fs29">val cos : value:&#39;T -&gt; &#39;T (requires member Cos)<br /><br />Full name: Microsoft.FSharp.Core.Operators.cos</div>
<div class="tip" id="fs30">val jvh : D []<br /><br />Full name: Gettingstarted-nestedad.jvh</div>
<div class="tip" id="fs31">val jacobianv : f:(D [] -&gt; D []) -&gt; x:D [] -&gt; v:D [] -&gt; D []<br /><br />Full name: DiffSharp.AD.DiffOps.jacobianv</div>
<div class="tip" id="fs32">val tjvh : D []<br /><br />Full name: Gettingstarted-nestedad.tjvh</div>
<div class="tip" id="fs33">val jacobianTv : f:(D [] -&gt; D []) -&gt; x:D [] -&gt; v:D [] -&gt; D []<br /><br />Full name: DiffSharp.AD.DiffOps.jacobianTv</div>
<div class="tip" id="fs34">val jh : D [,]<br /><br />Full name: Gettingstarted-nestedad.jh</div>
<div class="tip" id="fs35">val jacobian : f:(D [] -&gt; D []) -&gt; x:D [] -&gt; D [,]<br /><br />Full name: DiffSharp.AD.DiffOps.jacobian</div>
<div class="tip" id="fs36">val i : uint32<br /><br />Full name: Gettingstarted-nestedad.i</div>
<div class="tip" id="fs37">module Util<br /><br />from DiffSharp</div>
<div class="tip" id="fs38">Multiple items<br />type GlobalTagger =<br />&#160;&#160;new : unit -&gt; GlobalTagger<br />&#160;&#160;static member Next : uint32<br />&#160;&#160;static member Reset : unit<br /><br />Full name: DiffSharp.Util.GlobalTagger<br /><br />--------------------<br />new : unit -&gt; DiffSharp.Util.GlobalTagger</div>
<div class="tip" id="fs39">property DiffSharp.Util.GlobalTagger.Next: uint32</div>
<div class="tip" id="fs40">val a : D<br /><br />Full name: Gettingstarted-nestedad.a</div>
<div class="tip" id="fs41">val makeDR : i:uint32 -&gt; p:D -&gt; D<br /><br />Full name: DiffSharp.AD.DOps.makeDR</div>
<div class="tip" id="fs42">val b : D<br /><br />Full name: Gettingstarted-nestedad.b</div>
<div class="tip" id="fs43">val e : D<br /><br />Full name: Gettingstarted-nestedad.e</div>
<div class="tip" id="fs44">val reverseProp : v:D -&gt; d:D -&gt; unit<br /><br />Full name: DiffSharp.AD.DOps.reverseProp</div>
<div class="tip" id="fs45">val deda : D<br /><br />Full name: Gettingstarted-nestedad.deda</div>
<div class="tip" id="fs46">property D.A: D</div>
<div class="tip" id="fs47">val dedb : D<br /><br />Full name: Gettingstarted-nestedad.dedb</div>
<div class="tip" id="fs48">val i&#39; : uint32<br /><br />Full name: Gettingstarted-nestedad.i&#39;</div>
<div class="tip" id="fs49">val a&#39; : D<br /><br />Full name: Gettingstarted-nestedad.a&#39;</div>
<div class="tip" id="fs50">val b&#39; : D<br /><br />Full name: Gettingstarted-nestedad.b&#39;</div>
<div class="tip" id="fs51">val c&#39; : D<br /><br />Full name: Gettingstarted-nestedad.c&#39;</div>
<div class="tip" id="fs52">val d&#39; : D<br /><br />Full name: Gettingstarted-nestedad.d&#39;</div>
<div class="tip" id="fs53">val e&#39; : D<br /><br />Full name: Gettingstarted-nestedad.e&#39;</div>
<div class="tip" id="fs54">val de&#39;da&#39; : D<br /><br />Full name: Gettingstarted-nestedad.de&#39;da&#39;</div>
<div class="tip" id="fs55">val de&#39;db&#39; : D<br /><br />Full name: Gettingstarted-nestedad.de&#39;db&#39;</div>
<div class="tip" id="fs56">val de&#39;dc&#39; : D<br /><br />Full name: Gettingstarted-nestedad.de&#39;dc&#39;</div>
<div class="tip" id="fs57">val de&#39;dd&#39; : D<br /><br />Full name: Gettingstarted-nestedad.de&#39;dd&#39;</div>
          
        </div>
        <div class="span3">
          <a href="index.html"><img src="img/diffsharp-logo.png" style="width:140px;height:140px;margin:10px 0px 0px 20px;border-style:none;"/></a>

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">DiffSharp</li>
            <li class="divider"></li>
            <li><a href="index.html">Home Page</a></li>
            <li><a href="https://www.nuget.org/packages/diffsharp">Get DiffSharp via NuGet</a></li>
            <li><a href="https://github.com/DiffSharp/DiffSharp">GitHub Page</a></li>
            <li><a href="https://github.com/DiffSharp/DiffSharp/releases">Release Notes</a></li>

            <li class="nav-header">Getting Started</li>
            <li class="divider"></li>
            <li><a href="gettingstarted-typeinference.html">Type Inference</a></li>
            <li><a href="api-overview.html">API Overview</a></li>
            <li><a href="gettingstarted-nestedad.html">Nested AD</a></li>
            <li><a href="gettingstarted-nonnestedad.html">Non-nested AD</a></li>
            <li><a href="gettingstarted-numericaldifferentiation.html">Numerical Differentiation</a></li>
            <li><a href="gettingstarted-symbolicdifferentiation.html">Symbolic Differentiation</a></li>
            <li><a href="benchmarks.html">Benchmarks</a></li>
            <li><a href="csharp.html">C# and Other Languages</a></li>            
            <li><a href="reference/index.html">API Reference</a></li>

            <li class="nav-header">Examples</li>
            <li class="divider"></li>

            <li class="nav-header">Machine Learning</li>
            <li><a href="examples-gradientdescent.html">Gradient Descent</a></li>
            <li><a href="examples-newtonsmethod.html">Newton's Method</a></li>
            <li><a href="examples-stochasticgradientdescent.html">Stochastic Gradient Descent</a></li>
            <li><a href="examples-kmeansclustering.html">K-Means Clustering</a></li>
            <li><a href="examples-hamiltonianmontecarlo.html">Hamiltonian Monte Carlo</a></li>
            <li><a href="examples-neuralnetworks.html">Neural Networks</a></li>
            <li>Neural Turing Machines (to come)</li>
            <li>Probabilistic Programming<br>(to come)</li>

            <li class="nav-header">Dynamical Systems</li>
            <li>Stability Analysis (to come)</li>

            <li class="nav-header">Control</li>
            <li><a href="examples-inversekinematics.html">Inverse Kinematics</a></li>
            <li>Adaptive Control (to come)</li>

            <li class="nav-header">Physics</li>
            <li><a href="examples-kinematics.html">Kinematics</a></li>
            <li>Leapfrog Integration (to come)</li>
            <li><a href="examples-helmholtzenergyfunction.html">Helmholtz Energy Function</a></li>

            <li class="nav-header">Math</li>
            <li><a href="examples-lhopitalsrule.html">l'Hôpital's Rule</a></li>

            <li class="nav-header">Makers</li>
            <li class="divider"></li>
            <li><a href="https://www.cs.nuim.ie/~gunes/">Atılım Güneş Baydin</a></li>
            <li><a href="http://www.bcl.hamilton.ie/~barak/">Barak A. Pearlmutter</a></li>
            <li><a href="http://www.bcl.hamilton.ie/">Brain and Computation Lab</a></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=10059115; 
    var sc_invisible=1; 
    var sc_security="92275ee1"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="https://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="https://c.statcounter.com/10059115/0/92275ee1/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->
  </body>
</html>